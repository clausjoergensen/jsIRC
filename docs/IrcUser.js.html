<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>IrcUser.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CtcpClient.html">CtcpClient</a><ul class='methods'><li data-type='method'><a href="CtcpClient.html#action">action</a></li><li data-type='method'><a href="CtcpClient.html#finger">finger</a></li><li data-type='method'><a href="CtcpClient.html#ping">ping</a></li><li data-type='method'><a href="CtcpClient.html#time">time</a></li><li data-type='method'><a href="CtcpClient.html#version">version</a></li></ul></li><li><a href="IrcChannel.html">IrcChannel</a><ul class='methods'><li data-type='method'><a href="IrcChannel.html#ban">ban</a></li><li data-type='method'><a href="IrcChannel.html#getChannelUser">getChannelUser</a></li><li data-type='method'><a href="IrcChannel.html#getModes">getModes</a></li><li data-type='method'><a href="IrcChannel.html#invite">invite</a></li><li data-type='method'><a href="IrcChannel.html#kick">kick</a></li><li data-type='method'><a href="IrcChannel.html#part">part</a></li><li data-type='method'><a href="IrcChannel.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="IrcChannel.html#sendNotice">sendNotice</a></li><li data-type='method'><a href="IrcChannel.html#setModes">setModes</a></li><li data-type='method'><a href="IrcChannel.html#toString">toString</a></li><li data-type='method'><a href="IrcChannel.html#unban">unban</a></li></ul></li><li><a href="IrcChannelUser.html">IrcChannelUser</a><ul class='methods'><li data-type='method'><a href="IrcChannelUser.html#ban">ban</a></li><li data-type='method'><a href="IrcChannelUser.html#deop">deop</a></li><li data-type='method'><a href="IrcChannelUser.html#devoice">devoice</a></li><li data-type='method'><a href="IrcChannelUser.html#kick">kick</a></li><li data-type='method'><a href="IrcChannelUser.html#op">op</a></li><li data-type='method'><a href="IrcChannelUser.html#toString">toString</a></li><li data-type='method'><a href="IrcChannelUser.html#voice">voice</a></li></ul></li><li><a href="IrcClient.html">IrcClient</a><ul class='methods'><li data-type='method'><a href="IrcClient.html#connect">connect</a></li><li data-type='method'><a href="IrcClient.html#getMessageOfTheDay">getMessageOfTheDay</a></li><li data-type='method'><a href="IrcClient.html#getNetworkInfo">getNetworkInfo</a></li><li data-type='method'><a href="IrcClient.html#getServerLinks">getServerLinks</a></li><li data-type='method'><a href="IrcClient.html#getServerStatistics">getServerStatistics</a></li><li data-type='method'><a href="IrcClient.html#getServerTime">getServerTime</a></li><li data-type='method'><a href="IrcClient.html#getServerVersion">getServerVersion</a></li><li data-type='method'><a href="IrcClient.html#listChannels">listChannels</a></li><li data-type='method'><a href="IrcClient.html#oper">oper</a></li><li data-type='method'><a href="IrcClient.html#ping">ping</a></li><li data-type='method'><a href="IrcClient.html#queryWho">queryWho</a></li><li data-type='method'><a href="IrcClient.html#queryWhoIs">queryWhoIs</a></li><li data-type='method'><a href="IrcClient.html#queryWhoWas">queryWhoWas</a></li><li data-type='method'><a href="IrcClient.html#quit">quit</a></li><li data-type='method'><a href="IrcClient.html#sendRawMessage">sendRawMessage</a></li><li data-type='method'><a href="IrcClient.html#toString">toString</a></li></ul></li><li><a href="IrcFloodPreventer.html">IrcFloodPreventer</a><ul class='methods'><li data-type='method'><a href="IrcFloodPreventer.html#getSendDelay">getSendDelay</a></li><li data-type='method'><a href="IrcFloodPreventer.html#messageSent">messageSent</a></li></ul></li><li><a href="IrcLocalUser.html">IrcLocalUser</a><ul class='methods'><li data-type='method'><a href="IrcLocalUser.html#getChannelUsers">getChannelUsers</a></li><li data-type='method'><a href="IrcLocalUser.html#getModes">getModes</a></li><li data-type='method'><a href="IrcLocalUser.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="IrcLocalUser.html#sendNotice">sendNotice</a></li><li data-type='method'><a href="IrcLocalUser.html#setAway">setAway</a></li><li data-type='method'><a href="IrcLocalUser.html#setModes">setModes</a></li><li data-type='method'><a href="IrcLocalUser.html#setNickName">setNickName</a></li><li data-type='method'><a href="IrcLocalUser.html#toString">toString</a></li><li data-type='method'><a href="IrcLocalUser.html#unsetAway">unsetAway</a></li><li data-type='method'><a href="IrcLocalUser.html#whoIs">whoIs</a></li><li data-type='method'><a href="IrcLocalUser.html#whoWas">whoWas</a></li></ul></li><li><a href="IrcServer.html">IrcServer</a><ul class='methods'><li data-type='method'><a href="IrcServer.html#toString">toString</a></li></ul></li><li><a href="IrcUser.html">IrcUser</a><ul class='methods'><li data-type='method'><a href="IrcUser.html#getChannelUsers">getChannelUsers</a></li><li data-type='method'><a href="IrcUser.html#toString">toString</a></li><li data-type='method'><a href="IrcUser.html#whoIs">whoIs</a></li><li data-type='method'><a href="IrcUser.html#whoWas">whoWas</a></li></ul></li><li><a href="IrcUtils.html">IrcUtils</a><ul class='methods'><li data-type='method'><a href="IrcUtils.html#.updateModes">updateModes</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="CtcpClient.html#event:clientInfo">clientInfo</a></li><li><a href="CtcpClient.html#event:finger">finger</a></li><li><a href="CtcpClient.html#event:ping">ping</a></li><li><a href="CtcpClient.html#event:rawMessage">rawMessage</a></li><li><a href="CtcpClient.html#event:time">time</a></li><li><a href="CtcpClient.html#event:version">version</a></li><li><a href="IrcChannel.html#event:action">action</a></li><li><a href="IrcChannel.html#event:message">message</a></li><li><a href="IrcChannel.html#event:modes">modes</a></li><li><a href="IrcChannel.html#event:notice">notice</a></li><li><a href="IrcChannel.html#event:previewMessage">previewMessage</a></li><li><a href="IrcChannel.html#event:previewNotice">previewNotice</a></li><li><a href="IrcChannel.html#event:topic">topic</a></li><li><a href="IrcChannel.html#event:userInvite">userInvite</a></li><li><a href="IrcChannel.html#event:userJoinedChannel">userJoinedChannel</a></li><li><a href="IrcChannel.html#event:userKicked">userKicked</a></li><li><a href="IrcChannel.html#event:userLeftChannel">userLeftChannel</a></li><li><a href="IrcChannel.html#event:userQuit">userQuit</a></li><li><a href="IrcChannelUser.html#event:channel">channel</a></li><li><a href="IrcChannelUser.html#event:modes">modes</a></li><li><a href="IrcClient.html#event:banList">banList</a></li><li><a href="IrcClient.html#event:bounce">bounce</a></li><li><a href="IrcClient.html#event:channelList">channelList</a></li><li><a href="IrcClient.html#event:channelMode">channelMode</a></li><li><a href="IrcClient.html#event:clientInfo">clientInfo</a></li><li><a href="IrcClient.html#event:connected">connected</a></li><li><a href="IrcClient.html#event:connecting">connecting</a></li><li><a href="IrcClient.html#event:connectionClosed">connectionClosed</a></li><li><a href="IrcClient.html#event:connectionError">connectionError</a></li><li><a href="IrcClient.html#event:disconnected">disconnected</a></li><li><a href="IrcClient.html#event:error">error</a></li><li><a href="IrcClient.html#event:motd">motd</a></li><li><a href="IrcClient.html#event:networkInfo">networkInfo</a></li><li><a href="IrcClient.html#event:notice">notice</a></li><li><a href="IrcClient.html#event:ping">ping</a></li><li><a href="IrcClient.html#event:pong">pong</a></li><li><a href="IrcClient.html#event:protocolError">protocolError</a></li><li><a href="IrcClient.html#event:registered">registered</a></li><li><a href="IrcClient.html#event:serverLinks">serverLinks</a></li><li><a href="IrcClient.html#event:serverStatistics">serverStatistics</a></li><li><a href="IrcClient.html#event:serverSupportedFeatures">serverSupportedFeatures</a></li><li><a href="IrcClient.html#event:serverTime">serverTime</a></li><li><a href="IrcClient.html#event:serverVersion">serverVersion</a></li><li><a href="IrcClient.html#event:whoIsReply">whoIsReply</a></li><li><a href="IrcClient.html#event:whoReply">whoReply</a></li><li><a href="IrcClient.html#event:whoWasReply">whoWasReply</a></li><li><a href="IrcLocalUser.html#event:action">action</a></li><li><a href="IrcLocalUser.html#event:awayMessage">awayMessage</a></li><li><a href="IrcLocalUser.html#event:hopCount">hopCount</a></li><li><a href="IrcLocalUser.html#event:idleDuration">idleDuration</a></li><li><a href="IrcLocalUser.html#event:invite">invite</a></li><li><a href="IrcLocalUser.html#event:isAway">isAway</a></li><li><a href="IrcLocalUser.html#event:isOperator">isOperator</a></li><li><a href="IrcLocalUser.html#event:joinedChannel">joinedChannel</a></li><li><a href="IrcLocalUser.html#event:message">message</a></li><li><a href="IrcLocalUser.html#event:modes">modes</a></li><li><a href="IrcLocalUser.html#event:nickName">nickName</a></li><li><a href="IrcLocalUser.html#event:notice">notice</a></li><li><a href="IrcLocalUser.html#event:partedChannel">partedChannel</a></li><li><a href="IrcLocalUser.html#event:previewMessage">previewMessage</a></li><li><a href="IrcLocalUser.html#event:previewNotice">previewNotice</a></li><li><a href="IrcLocalUser.html#event:quit">quit</a></li><li><a href="IrcLocalUser.html#event:realName">realName</a></li><li><a href="IrcLocalUser.html#event:serverInfo">serverInfo</a></li><li><a href="IrcLocalUser.html#event:serverName">serverName</a></li><li><a href="IrcLocalUser.html#event:userName">userName</a></li><li><a href="IrcUser.html#event:action">action</a></li><li><a href="IrcUser.html#event:awayMessage">awayMessage</a></li><li><a href="IrcUser.html#event:hopCount">hopCount</a></li><li><a href="IrcUser.html#event:idleDuration">idleDuration</a></li><li><a href="IrcUser.html#event:invite">invite</a></li><li><a href="IrcUser.html#event:isAway">isAway</a></li><li><a href="IrcUser.html#event:isOperator">isOperator</a></li><li><a href="IrcUser.html#event:joinedChannel">joinedChannel</a></li><li><a href="IrcUser.html#event:message">message</a></li><li><a href="IrcUser.html#event:nickName">nickName</a></li><li><a href="IrcUser.html#event:notice">notice</a></li><li><a href="IrcUser.html#event:partedChannel">partedChannel</a></li><li><a href="IrcUser.html#event:previewMessage">previewMessage</a></li><li><a href="IrcUser.html#event:previewNotice">previewNotice</a></li><li><a href="IrcUser.html#event:quit">quit</a></li><li><a href="IrcUser.html#event:realName">realName</a></li><li><a href="IrcUser.html#event:serverInfo">serverInfo</a></li><li><a href="IrcUser.html#event:serverName">serverName</a></li><li><a href="IrcUser.html#event:userName">userName</a></li></ul><h3>Global</h3><ul><li><a href="global.html#IrcChannelType">IrcChannelType</a></li><li><a href="global.html#IrcError">IrcError</a></li><li><a href="global.html#IrcReply">IrcReply</a></li><li><a href="global.html#IrcServerStatisticalEntry">IrcServerStatisticalEntry</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">IrcUser.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Copyright (c) 2018 Claus Jørgensen
'use strict'

const events = require('events')
const { EventEmitter } = events

/**
 * Represents an IRC user that exists on a specific {@link IrcClient}.
 *
 * @class
 * @extends EventEmitter
 */
class IrcUser extends EventEmitter {
  /**
   * Constructs a new IrcUser for a given {@link IrcClient}.
   *
   * @access protected
   * @hideconstructor
   * @param {IrcClient} client The IrcClient instance.
  */
  constructor (client) {
    super()
    this._client = client
    this._isOnline = false
    this._nickName = null
    this._userName = null
    this._realName = null
    this._idleDuration = null
    this._isOperator = false
    this._serverName = null
    this._serverInfo = null
    this._isAway = false
    this._awayMessage = null
    this._hopCount = 0
  }

  /**
   * Gets the client on which the user exists.
   *
   * @public
   */
  get client () {
    return this._client
  }

  /**
   * Gets wheather the user is a local user.
   *
   * @public
   * @return {boolean} True if the user is local; otherwise false.
   */
  get isLocalUser () {
    return false
  }

  /*
   * Gets the name of the source, as understood by the IRC protocol.
   */
  get name () {
    return this.nickName
  }

  /**
   * Gets whether the user is currently connected to the IRC network.
   * This value may not be always be up-to-date.
   *
   * @public
   */
  get isOnline () {
    return this._isOnline
  }

  /**
   * Sets whether the user is currently connected to the IRC network.
   *
   * @fires IrcUser#isOnline
   */
  set isOnline (value) {
    this._isOnline = value
    this.emit('isOnline')
  }

  /**
   * Gets the current nick name of the user.
   *
   * @public
   */
  get nickName () {
    return this._nickName
  }

  /**
   * Sets the current nick name of the user
   *
   * @fires IrcUser#nickName
   */
  set nickName (value) {
    this._nickName = value
    /**
     * @event IrcUser#nickName
     */
    this.emit('nickName')
  }

  /**
   * Gets the current user name of the user. This value never changes until the user reconnects.
   *
   * @public
   */
  get userName () {
    return this._userName
  }

  /**
   * Sets the current user name of the user
   *
   * @fires IrcUser#userName
   */
  set userName (value) {
    this._userName = value
    /**
     * @event IrcUser#userName
     */
    this.emit('userName')
  }

  /**
   * Gets the host name of the user.
   *
   * @public
   */
  get realName () {
    return this._realName
  }

  /**
   * Sets the host name of the user
   *
   * @fires IrcUser#realName
   */
  set realName (value) {
    this._realName = value
    /**
     * @event IrcUser#realName
     */
    this.emit('realName')
  }

  /**
   * Gets the duration for which the user has been idle. This is set when a Who Is response is received.
   *
   * @public
   */
  get idleDuration () {
    return this._idleDuration
  }

  /**
   * Sets the duration for which the user has been idle.
   *
   * @fires IrcUser#idleDuration
   */
  set idleDuration (value) {
    this._idleDuration = value
    /**
     * @event IrcUser#idleDuration
     */
    this.emit('idleDuration')
  }

  /**
   * Gets whether the user is a server operator.
   *
   * @public
   */
  get isOperator () {
    return this._isOperator
  }

  /**
   * Sets whether the user is a server operator.
   *
   * @fires IrcUser#isOperator
   */
  set isOperator (value) {
    this._isOperator = value
    /**
     * @event IrcUser#isOperator
     */
    this.emit('isOperator')
  }

  /**
   * Gets the name of the server to which the user is connected.
   *
   * @public
   */
  get serverName () {
    return this._serverName
  }

  /**
   * Sets the name of the server to which the user is connected.
   *
   * @fires IrcUser#serverName
   */
  set serverName (value) {
    this._serverName = value
    /**
     * @event IrcUser#serverName
     */
    this.emit('serverName')
  }

  /**
   * Gets arbitrary information about the server to which the user is connected.
   *
   * @public
   */
  get serverInfo () {
    return this._serverInfo
  }

  /**
   * Sets the information about the server to which the user is connected.
   *
   * @fires IrcUser#serverInfo
   */
  set serverInfo (value) {
    this._serverInfo = value
    /**
     * @event IrcUser#serverInfo
     */
    this.emit('serverInfo')
  }

  /**
   * Gets whether the user has been been seen as away. This value is always up-to-date for the local user;
   * though it is only updated for remote users when a private message is sent to them or a Who Is response
   * is received for the user.
   *
   * @public
   */
  get isAway () {
    return this._isAway
  }

  /**
   * Sets wheather the user should be seen as away.
   *
   * @fires IrcUser#isAway
   */
  set isAway (value) {
    this._isAway = value
    /**
     * @event IrcUser#isAway
     */
    this.emit('isAway')
  }

  /**
   * Gets the current away message received when the user was seen as away.
   *
   * @public
   */
  get awayMessage () {
    return this._awayMessage
  }

  /**
   * Sets the users away message.
   *
   * @fires IrcUser#awayMessage
   */
  set awayMessage (value) {
    this._awayMessage = value
    /**
     * @event IrcUser#awayMessage
     */
    this.emit('awayMessage')
  }

  /**
   * Gets the hop count of the user, which is the number of servers between the user and the server on which the
   * client is connected, within the network.
   *
   * @public
   */
  get hopCount () {
    return this._hopCount
  }

  /**
   * Sets the hop count of the user.
   *
   * @fires IrcUser#hopCount
   */
  set hopCount (value) {
    this._hopCount = value
    /**
     * @event IrcUser#hopCount
     */
    this.emit('hopCount')
  }

  /**
   * Sends a Who Is query to server for the user.
   *
   * @public
   */
  whoIs () {
    this.client.queryWhoIs(this._nickName)
  }

  /**
   * Sends a Who Was query to server for the user.
   *
   * @public
   * @param {Int} [entriesCount] The maximum number of entries that the server should return. Specify -1 for unlimited.
   */
  whoWas (entriesCount = -1) {
    this.client.queryWhoWas([this._nickName], entriesCount)
  }

  /**
   * Gets a array of all channel users that correspond to the user.
   * Each IrcChannelUser represents a channel of which the user is currently a member.
   *
   * @public
   * @return {IrcChannelUser[]} A array of all IrcChannelUser object that correspond to the IrcUser.
   */
  getChannelUsers () {
    let channelUsers = []
    this.client.channels.forEach(channel => {
      channel.users.forEach(channelUser => {
        if (channelUser.user === this) {
          channelUsers.push(channelUser)
        }
      })
    })
    return channelUsers
  }

  /**
   * Returns a string representation of this instance.
   *
   * @return {string} A string that represents this instance.
   */
  toString () {
    return this.nickName
  }

  // - Internal Methods

  quit (comment) {
    let allChannelUsers = []
    this.client.channels.forEach(channel => {
      channel.users.forEach(channelUser => {
        if (channelUser.user === this) {
          allChannelUsers.push(channelUser)
        }
      })
    })

    allChannelUsers.forEach(cu => cu.channel.userQuit(cu, comment))

    /**
     * @event IrcUser#quit
     * @param {string} comment
     */
    this.emit('quit', comment)
  }

  joinChannel (channel) {
    /**
     * @event IrcUser#joinedChannel
     * @param {IrcChannel} channel
     */
    this.emit('joinedChannel', channel)
  }

  partChannel (channel) {
    /**
     * @event IrcUser#partedChannel
     * @param {IrcChannel} channel
     */
    this.emit('partedChannel', channel)
  }

  inviteReceived (source, channel) {
    /**
     * @event IrcUser#invite
     * @param {IrcChannel} channel
     * @param {IrcUser} source
     */
    this.emit('invite', channel, source)
  }

  actionReceived (source, targets, messageText) {
    /**
     * @event IrcUser#action
     * @param {IrcUser|IrcChannel} source
     * @param {string} messageText
     */
    this.emit('action', source, messageText)
  }

  messageReceived (source, targets, messageText) {
    let previewMessageEventArgs = { 'handled': false, 'source': source, 'targets': targets, 'text': messageText }
    /**
     * @event IrcUser#previewMessage
     * @property {boolean} handled
     * @property {IrcUser|IrcChannel} source
     * @property {string[]} targets
     * @property {string} messageText
     */
    this.emit('previewMessage', previewMessageEventArgs)

    if (!previewMessageEventArgs.handled) {
      /**
       * @event IrcUser#message
       * @param {IrcUser|IrcChannel} source
       * @param {string} messageText
       */
      this.emit('message', source, targets, messageText)
    }
  }

  noticeReceived (source, targets, noticeText) {
    let previewNoticeEventArgs = { 'handled': false, 'source': source, 'targets': targets, 'text': noticeText }
    /**
     * @event IrcUser#previewNotice
     * @property {boolean} handled
     * @property {IrcUser|IrcChannel} source
     * @property {string[]} targets
     * @property {string} noticeText
     */
    this.emit('previewNotice', previewNoticeEventArgs)

    if (!previewNoticeEventArgs.handled) {
      /**
       * @event IrcUser#notice
       * @param {IrcUser|IrcChannel} source
       * @param {string} noticeText
       */
      this.emit('notice', source, targets, noticeText)
    }
  }
}

module.exports = IrcUser
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Aug 13 2018 18:26:30 GMT+0200 (Romance Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
